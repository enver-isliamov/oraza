<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#c49a3c" id="metaThemeColor">
    <title>Махрамы · Рамадан 1447</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;500;600;700;800;900&family=Cormorant+Garamond:wght@600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --imsak: #d94f5c;
            --imsak-soft: rgba(217, 79, 92, 0.1);
            --iftar: #1fa86a;
            --iftar-soft: rgba(31, 168, 106, 0.1);
            --gold: #c49a3c;
            --gold-soft: rgba(196, 154, 60, 0.13);
            --bg: #f6f3ee;
            --surface: #ffffff;
            --surface2: #efebe4;
            --text: #1a1612;
            --text2: #5a5248;
            --text3: #998f85;
            --border: rgba(26, 22, 18, 0.09);
            --shadow-sm: 0 1px 4px rgba(26, 22, 18, 0.07), 0 2px 8px rgba(26, 22, 18, 0.05);
            --r: 14px;
            --font-body: 'Nunito', sans-serif;
            --font-display: 'Cormorant Garamond', serif;
        }

        [data-theme="dark"] {
            --bg: #100e0c;
            --surface: #1b1814;
            --surface2: #252019;
            --text: #f0ebe4;
            --text2: #a09588;
            --text3: #66605a;
            --border: rgba(240, 235, 228, 0.08);
            --shadow-sm: 0 1px 4px rgba(0, 0, 0, 0.25), 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: var(--font-body);
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
            -webkit-font-smoothing: antialiased;
        }

        .topbar {
            position: sticky;
            top: 0;
            z-index: 20;
            background: var(--bg);
            border-bottom: 1px solid var(--border);
            padding-top: env(safe-area-inset-top, 0px);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
        }

        .topbar-inner,
        .main,
        .support-wrap {
            max-width: 500px;
            margin: 0 auto;
            padding-left: 14px;
            padding-right: 14px;
        }

        .topbar-inner {
            min-height: 58px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 8px;
        }

        .brand {
            min-width: 0;
            font-family: var(--font-display);
            font-size: 1.08rem;
            font-weight: 700;
            line-height: 1.05;
        }

        .brand em { color: var(--gold); font-style: normal; }

        .brand small {
            display: block;
            margin-top: 2px;
            font-family: var(--font-body);
            font-size: 0.6rem;
            font-weight: 800;
            letter-spacing: 0.08em;
            text-transform: uppercase;
            color: var(--text3);
        }

        .home-link {
            text-decoration: none;
            font-size: 0.74rem;
            font-weight: 800;
            color: var(--text2);
            border: 1px solid var(--border);
            background: var(--surface);
            border-radius: 999px;
            padding: 7px 10px;
            box-shadow: var(--shadow-sm);
        }

        .main { padding-top: 11px; padding-bottom: 10px; }

        .hero-card,
        .card,
        .table-card,
        .focus-card {
            border-radius: var(--r);
            box-shadow: var(--shadow-sm);
            margin-bottom: 8px;
        }

        .hero-card {
            border: 1px solid rgba(196, 154, 60, 0.24);
            background: linear-gradient(135deg, rgba(196, 154, 60, 0.14), rgba(196, 154, 60, 0.04));
            padding: 12px;
        }

        .hero-title {
            font-size: 1.2rem;
            font-family: var(--font-display);
            line-height: 1.1;
            margin-bottom: 6px;
        }

        .hero-subtitle {
            font-size: 0.76rem;
            color: var(--text2);
            line-height: 1.45;
            font-weight: 600;
        }

        .grid { display: grid; gap: 8px; }

        .card,
        .table-card {
            background: var(--surface);
            border: 1px solid var(--border);
            padding: 11px;
        }

        .card-head {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 4px 9px;
            border-radius: 999px;
            font-size: 0.62rem;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 0.06em;
            margin-bottom: 8px;
        }

        .head-blood { color: var(--imsak); background: var(--imsak-soft); }
        .head-marriage { color: var(--iftar); background: var(--iftar-soft); }

        .card p,
        .card li,
        .focus-card p {
            font-size: 0.76rem;
            line-height: 1.45;
            color: var(--text2);
            font-weight: 600;
        }

        .card p + p { margin-top: 6px; }
        .card ul { list-style: none; margin-top: 5px; display: grid; gap: 4px; }

        .card li::before {
            content: "•";
            color: var(--gold);
            margin-right: 7px;
            font-weight: 900;
        }

        .compact-list {
            display: grid;
            gap: 6px;
            grid-template-columns: repeat(2, minmax(0, 1fr));
            margin-top: 2px;
        }

        .compact-item {
            display: flex;
            align-items: center;
            gap: 6px;
            background: var(--surface2);
            border: 1px solid var(--border);
            border-radius: 9px;
            padding: 7px;
            min-height: 38px;
        }

        .compact-num {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background: var(--imsak-soft);
            color: var(--imsak);
            font-size: 0.62rem;
            font-weight: 800;
            flex-shrink: 0;
        }

        .compact-label {
            font-size: 0.72rem;
            font-weight: 700;
            color: var(--text);
            line-height: 1.2;
        }

        .table-card h3,
        .focus-card h3 {
            font-size: 0.86rem;
            line-height: 1.3;
            margin-bottom: 7px;
        }

        table { width: 100%; border-collapse: collapse; border-radius: 10px; overflow: hidden; }

        th, td {
            text-align: left;
            font-size: 0.72rem;
            padding: 8px;
            border: 1px solid var(--border);
        }

        th { background: var(--surface2); color: var(--text); font-weight: 800; }
        td { color: var(--text2); font-weight: 600; background: var(--surface); }

        .focus-card {
            border: 1px solid rgba(217, 79, 92, 0.26);
            background: linear-gradient(145deg, rgba(217, 79, 92, 0.1), rgba(217, 79, 92, 0.03));
            padding: 11px;
            text-align: center;
        }

        .btn {
            margin-top: 8px;
            border: none;
            background: var(--text);
            color: var(--bg);
            border-radius: 9px;
            padding: 8px 12px;
            font-family: var(--font-body);
            font-size: 0.72rem;
            font-weight: 700;
            cursor: pointer;
        }

        .extra-info {
            margin-top: 8px;
            border: 1px solid var(--border);
            border-radius: 10px;
            background: var(--surface);
            padding: 8px;
            text-align: left;
            font-size: 0.72rem;
            color: var(--text2);
            line-height: 1.5;
            font-weight: 600;
        }

        .extra-info p + p { margin-top: 6px; }

        .sources {
            margin-top: 7px;
            padding: 8px;
            border-radius: 8px;
            background: var(--surface2);
            border: 1px solid var(--border);
        }

        .sources-title {
            font-size: 0.6rem;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            font-weight: 800;
            color: var(--text3);
            margin-bottom: 4px;
        }

        .sources ul { list-style: none; display: grid; gap: 4px; }

        .sources li {
            font-size: 0.68rem;
            line-height: 1.32;
            color: var(--text2);
            font-weight: 700;
        }

        .hidden { display: none; }

        .support-wrap { padding-bottom: 24px; }

        .gratitude-card {
            margin-top: 2px;
            padding: 10px;
            border-radius: 12px;
            border: 1px solid rgba(31, 168, 106, 0.18);
            background: linear-gradient(150deg, rgba(31, 168, 106, 0.11) 0%, rgba(31, 168, 106, 0.03) 100%);
            box-shadow: var(--shadow-sm);
        }

        .gratitude-main {
            display: grid;
            grid-template-columns: minmax(0, 1fr) auto;
            gap: 8px;
            align-items: center;
        }

        .gratitude-eyebrow {
            font-size: 0.63rem;
            font-weight: 900;
            letter-spacing: 0.08em;
            text-transform: uppercase;
            color: var(--iftar);
            margin-bottom: 3px;
        }

        .gratitude-sub {
            font-size: 0.68rem;
            font-weight: 600;
            color: var(--text2);
            line-height: 1.32;
        }

        .gratitude-cta {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            white-space: nowrap;
            min-width: 112px;
            padding: 9px 12px;
            border-radius: 10px;
            border: 1px solid rgba(31, 168, 106, 0.24);
            background: linear-gradient(180deg, rgba(31, 168, 106, 0.95), rgba(31, 168, 106, 0.82));
            color: #fff;
            text-decoration: none;
            font-size: 0.68rem;
            font-weight: 700;
        }

        @media (max-width: 360px) {
            .compact-list { grid-template-columns: 1fr; }
            .gratitude-main { grid-template-columns: 1fr; }
            .gratitude-cta { width: 100%; }
        }
    </style>
</head>
<body data-article-id="mahram">
<header class="topbar">
    <div class="topbar-inner">
        <div class="brand">Раздел <em>Махрамы</em><small>Рамадан 1447 · Крым</small></div>
        <a href="materials.html" class="home-link">← К материалам</a>
    </div>
</header>

<main class="main">
    <section class="hero-card">
        <h1 class="hero-title">Кто такие махрамы: три категории женщин, запретных для брака</h1>
        <p class="hero-subtitle">Краткая памятка о женщинах, с которыми мужчине запрещено вступать в брак, и о правилах, связанных с этим статусом.</p>
    </section>

    <section class="grid">
        <article class="card">
            <div class="card-head head-blood">Кровное родство · 7 категорий</div>
            <div class="compact-list">
                <div class="compact-item"><span class="compact-num">1</span><span class="compact-label">Мать</span></div>
                <div class="compact-item"><span class="compact-num">2</span><span class="compact-label">Бабушки</span></div>
                <div class="compact-item"><span class="compact-num">3</span><span class="compact-label">Дочери</span></div>
                <div class="compact-item"><span class="compact-num">4</span><span class="compact-label">Внучки</span></div>
                <div class="compact-item"><span class="compact-num">5</span><span class="compact-label">Родные и сводные сестры</span></div>
                <div class="compact-item"><span class="compact-num">6</span><span class="compact-label">Тети</span></div>
                <div class="compact-item"><span class="compact-num">7</span><span class="compact-label">Племянницы</span></div>
            </div>
        </article>

        <article class="card">
            <div class="card-head head-blood">Молочное родство</div>
            <p>Молочное родство при выполнении условий кормления устанавливает те же запреты, что и кровное родство.</p>
            <ul>
                <li>Кормилица (при кормлении в раннем детском возрасте)</li>
                <li>Молочные сестры</li>
                <li>Тети по молочной линии</li>
            </ul>
        </article>

        <article class="card">
            <div class="card-head head-marriage">Родство через брак (свойство)</div>
            <p><strong>Ближайшие родственницы жены:</strong></p>
            <ul>
                <li>Теща (и её бабушки)</li>
                <li>Падчерица (если была близость с её матерью)</li>
            </ul>
            <p><strong>Жены кровных родственников:</strong></p>
            <ul>
                <li>Мачеха (жена отца/деда)</li>
                <li>Сноха (жена сына/внука)</li>
            </ul>
        </article>
    </section>

    <section class="table-card">
        <h3>Особенности установления запрета для родственниц по линии брака</h3>
        <table>
            <thead>
                <tr>
                    <th>Категория</th>
                    <th>Условие установления статуса махрама</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Теща</strong></td>
                    <td>Сразу после заключения никаха (даже без близости)</td>
                </tr>
                <tr>
                    <td><strong>Падчерица</strong></td>
                    <td>Только после совершения супружеской близости с её матерью</td>
                </tr>
                <tr>
                    <td><strong>Мачеха / Сноха</strong></td>
                    <td>Запрет устанавливается после заключения никаха с родственником</td>
                </tr>
            </tbody>
        </table>
    </section>

    <section class="focus-card">
        <h3>Собственная жена</h3>
        <p>Супруга является дозволенной для мужа и относится к числу тех, с кем разрешено уединение и совместная поездка в браке.</p>
        <button id="toggleBtn" class="btn" type="button">Узнать больше</button>
        <div id="extraInfo" class="extra-info hidden">
            <p><strong>Что важно знать:</strong> в браке между супругами разрешены близость, уединение и бытовое общение без хиджаб-ограничений, которые действуют с посторонними.</p>
            <p><strong>Правовой нюанс:</strong> этот статус действует, пока никях сохраняется. После окончательного расторжения брака правила меняются.</p>
            <p><strong>Поэтому:</strong> супруг(а) — это особая дозволенная категория, связанная с действующим брачным договором.</p>
            <div class="sources">
                <div class="sources-title">Надежные источники</div>
                <ul>
                    <li>Коран 4:23 — перечисление постоянно запретных категорий для брака.</li>
                    <li>Коран 24:31 — упоминание мужа как дозволенной категории в вопросах аурата.</li>
                    <li>Сахих аль-Бухари и Сахих Муслим: хадис о сопровождении женщины махрамом.</li>
                </ul>
            </div>
        </div>
    </section>
</main>

<div class="support-wrap">
    <div class="gratitude-card">
        <div class="gratitude-main">
            <div class="gratitude-copy">
                <div class="gratitude-eyebrow">Поддержка проекта</div>
                <div class="gratitude-sub">Если этот материал оказался полезным — поддержите развитие приложения и новых разделов.</div>
            </div>
            <a href="https://pay.cloudtips.ru/p/8a27e9ab" target="_blank" rel="noopener" class="gratitude-cta">Поблагодарить</a>
        </div>
    </div>
</div>

<script>
    const THEME_KEY = 'ramTheme';
    const READ_PROGRESS_KEY = 'ramReadProgress';
    const READ_COMPAT_KEY = 'ramReadArticles';
    const WORDS_PER_MINUTE = 180;
    
    const articleId = document.body.getAttribute('data-article-id');
    const mainText = (document.querySelector('main')?.textContent || '').trim();
    const words = (mainText.match(/[A-Za-zА-Яа-яЁё0-9]+/g) || []).length;
    const estimatedReadSeconds = Math.max(60, Math.ceil((words / WORDS_PER_MINUTE) * 60));
    const requiredSeconds = 15;

    let sessionStartedAt = Date.now();
    let activeMs = 0;

    function parseStoredObject(key) {
        try {
            const parsed = JSON.parse(localStorage.getItem(key) || '{}');
            return parsed && typeof parsed === 'object' ? parsed : {};
        } catch (error) {
            return {};
        }
    }

    function applyThemeFromStorage() {
        const theme = localStorage.getItem(THEME_KEY) || 'light';
        document.documentElement.setAttribute('data-theme', theme);
        const metaTheme = document.getElementById('metaThemeColor');
        if (metaTheme) {
            metaTheme.setAttribute('content', theme === 'dark' ? '#100e0c' : '#c49a3c');
        }
    }

    function persistProgress() {
        if (!articleId) return;

        const now = Date.now();
        if (!document.hidden) {
            activeMs += now - sessionStartedAt;
            sessionStartedAt = now;
        }

        const progressMap = parseStoredObject(READ_PROGRESS_KEY);
        const existing = progressMap[articleId] || {};
        const totalSeconds = Math.floor((Number(existing.seconds) || 0) + activeMs / 1000);
        const completed = totalSeconds >= requiredSeconds;

        progressMap[articleId] = {
            seconds: totalSeconds,
            requiredSeconds,
            estimatedReadSeconds,
            completed,
            updatedAt: Date.now()
        };
        localStorage.setItem(READ_PROGRESS_KEY, JSON.stringify(progressMap));

        if (completed) {
            const compatMap = parseStoredObject(READ_COMPAT_KEY);
            if (!compatMap[articleId]) {
                compatMap[articleId] = Date.now();
                localStorage.setItem(READ_COMPAT_KEY, JSON.stringify(compatMap));
            }
        }

        activeMs = 0;
    }

    document.addEventListener('visibilitychange', () => {
        if (document.hidden) {
            persistProgress();
        } else {
            sessionStartedAt = Date.now();
        }
    });

    window.addEventListener('beforeunload', persistProgress);

    document.getElementById('toggleBtn').addEventListener('click', function () {
        const info = document.getElementById('extraInfo');
        if (info.classList.contains('hidden')) {
            info.classList.remove('hidden');
            this.textContent = 'Скрыть';
        } else {
            info.classList.add('hidden');
            this.textContent = 'Узнать больше';
        }
    });

    applyThemeFromStorage();

    window.addEventListener('storage', (event) => {
        if (event.key === THEME_KEY) {
            applyThemeFromStorage();
        }
    });
</script>
<script defer src="metrics.js"></script>
<noscript><div><img src="https://mc.yandex.ru/watch/106936532" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
</body>
</html>
